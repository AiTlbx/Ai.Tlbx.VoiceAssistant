@using System.Collections.Generic

<select class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        value="@SelectedProvider"
        @onchange="OnProviderChanged"
        disabled="@Disabled">
    @foreach (var provider in AvailableProviders)
    {
        <option value="@provider">@provider</option>
    }
</select>

@code {
    [Parameter] public List<string> AvailableProviders { get; set; } = new();
    [Parameter] public string SelectedProvider { get; set; } = string.Empty;
    [Parameter] public EventCallback<string> SelectedProviderChanged { get; set; }
    [Parameter] public bool Disabled { get; set; } = false;

    private async Task OnProviderChanged(ChangeEventArgs e)
    {
        var newValue = e.Value?.ToString() ?? string.Empty;
        if (newValue != SelectedProvider)
        {
            SelectedProvider = newValue;
            await SelectedProviderChanged.InvokeAsync(newValue);
        }
    }
}
